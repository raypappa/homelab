---
# yaml-language-server: $schema=https://raw.githubusercontent.com/bjw-s/helm-charts/refs/heads/main/charts/other/app-template/values.schema.json
controllers:
  nfs-server:
    containers:
      server:
        image:
          repository: quay.io/aminvakil/alpine-nfs-server
          tag: latest
        env:
          TZ: America/Los_Angeles
          SHARED_DIRECTORY: &path /nfsshare
        securityContext:
          capabilities:
            add:
              - SYS_ADMIN
              - SETPCAP
defaultPodOptions:
  nodeSelector:
    kubernetes.io/hostname: puma
  priorityClassName: system-cluster-critical
  tolerations:
    - effect: NoSchedule
      operator: Exists
    - effect: NoExecute
      operator: Exists
service:
  server:
    controller: nfs-server
    clusterIP: 172.17.42.203
    ports:
      http:
        port: 2049
persistence:
  nfsshare:
    enabled: true
    type: hostPath
    hostPath: /library
    globalMounts:
      - path: *path
